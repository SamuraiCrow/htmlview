----------------------------------
MUI HTMLview MCC class - ChangeLog
----------------------------------

$Id$
$URL$

#### v13.4 RELEASE ############################################################

2007-12-21 Jens Langner <Jens.Langner@light-speed.de>

  * misc: preparations for the first new official release for AmigaOS4
    and MorphOS. Please note, however, that the class is still in very
    early beta state. So expect anything to happen :)
  * include/mccinit.c, mcc: adapted sources to get compiled for AmigaOS4
    again.

2007-12-15  Alfonso Ranieri <alforan@tin.it>

  * FormClass.cpp: Fixed a buffer overflow 

2007-12-03 Vit Sindlar <sindlarv at centrum dot cz>

  * mcp/locale/czech.ct: added Czech catalog translation

2007-11-25 Jens Langner <Jens.Langner@light-speed.de>

  * mcc, mcp: applied another large patch kindly provided by
    Alfonso Ranieri which heaps of changes - well, at least they seem to
    compile. Here are the documented changes by Alfonso:

    - All the new calls was changed to new (sdt:nothrow). This is needed
      to make for "new nothrow" to be able to fail. Of course, any new usage
      must be checked for failure. This is not easy, because of many
      structures and classes memebers are allocated  via  new and anywhere
      they are always aspected to exist. I tried to do my best, but, on too
      few memory condition, HTMLview might now  fails  badly (when  it  would
      have  been put in a loop) before, simply because I forgot to check
      something :P From now, when looking at the code, you should always check
      if  something that is used without caring about is there or not. In
      Memory.cpp if CANTFAILNONONO is not defined, this new "can fail mode"
      is on.  I  used  it for  hours  and everything warked on. I mean, I made
      malloc fails from time to time with no problem.

    - On MorphOS 1.45 and MUI 4 and ttf fonts, links are rendered in a very ugly
      way. It  happens with the old 68k HTMLview, so it must be new problem. A
      very temporary hack was implemented in TextClass.cpp  so  that  the
      background  is redrawn, before rendering a link.

    - Even on MorphOS, waiting for the 500k of the MCC code to load may be
      annoying when  the  MUIPrefs  creates  the sample in HTMLview.mcp. So the
      sample is now opened on request.

    - Changed mcp catalog name to HTMLview.catalog, because of many strings
      there may be used by the mcc itself (there is some string in mcc code).

    - Localized. I hate to use shortcuts not in the string with a  _  preparse.
      But the  need for a "name" to be given to the MUI20 menus make it impossible
      to be solved in another easier way.

    - Many other changes I truly don't remember.


2007-11-21 Jens Langner <Jens.Langner@light-speed.de>

  * mcc: made the source compile for OS4 again - however, the builds still
    seems to be broken and needs some closer look - volunteers? :)
  * mcc: exchanged all kprintf() uses by proper D() uses.
  * mcc: applied patch kindly provided by Alfonso Ranieri which will make
    our sources compile/run on MorphOS and bring them to a more compatible
    level so that hopefully we will soon have a completly running version
    for all platforms. However, there is still heaps of work to do to
    stabilize the sources - especially for different GCC versions -
    but we are getting near. Thanks again, Alfonso.

2007-08-19 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.10 version

2007-07-27 Jens Langner <Jens.Langner@light-speed.de>

  * mcc: fixed broken compilation due to recent changes.

2007-07-25  Thore Böckelmann <tboeckel@gmx.de>

  * #?/library.c: now really uses the 3 parameter version of GETINTERFACE()
    defined in mccinit.c instead of the old obsolete version in mcc_common.h.
    The user definable functions (i.e. ClassInit()) must be declared before
    the inclusion of mccinit.c.
  * include/mccinit.c: updated to latest 1.8 version which really uses the
    GETINTERFACE() macro with 3 parameters.

2007-07-25 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.7 version

2007-07-24  Thore Böckelmann <tboeckel@gmx.de>

  * include/mccinit.c: updated to latest 1.6 version which fixes an unbalanced
    if statement.

2007-07-23 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.5 version which should take care
    of stack issues.

2007-07-05 Jens Langner <Jens.Langner@light-speed.de>

  * include/mccinit.c: updated to latest 1.4 version and adapted all our
    library.c files to make use out of the new stack enforcing mechanisms.

2007-06-13  Thore Böckelmann <tboeckel@gmx.de>

  * #?/Debug.c: unified the _DPRINTF() functions for all platforms.

2007-06-11  Jens Langner <Jens.Langner@light-speed.de>

  * TreeClass.cpp: fixed incorrect va_arg() usage which ended up in an incorrect
    memory access crash. Now HTMLview-Test should at least run again.

2007-06-10  Jens Langner <Jens.Langner@light-speed.de>

  * mcp: adapted source to compile with new mccinit.c instead of mccheader.c
  * misc: integrated a large patch kindly provided by Jörg Strohmayer. Beside
    cleaning up the C++/C linkage some cleanups in the library init code should
    make htmlview.mcc less error prone. In addition, some fixes should finally
    enable us to build a running version which we can base our future changes
    on. However, still a lot work needs to be done to get HTMLview.mcc working
    as well as integrating Gunther Nikl's image decoders source code into the
    repository as well.

2007-05-29  Thore Böckelmann <tboeckel@gmx.de>

  * include/mccheader.c: reworked the LibOpen() and LibClose() functions to
    increment/decrement the lib_Open counter before obtaining the semaphore to
    prevent a possible race condition with LibExpunge().

2007-03-23  Thore Böckelmann <tboeckel@gmx.de>

  * #?/Debug.c: fixed wrong final output of debug classes and flags.

2007-03-18  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/mcp: fixed another bunch of compiler warnings. Now compiling the mcc
    should be quite silent which in fact will hopefully make it easier to hunt
    the rest of the issues preventing the MCC from working. In addition, all files
    should now contain the proper LGPL header.

2007-03-17  Ilkka Lehtoranta <ilkleht@isoveli.org>

  * mcc: now compiles using GCC2. All user CPP con/destructor functions are now
    declared in C sections to prevent C++ name mangling. Removed stub genetator
    for GCC4.
  * mcc: removed some warnings again.

2007-03-15  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/library.c: cleaned up the CPP constructor/destructor setups and added
    various missing comments about what is going on there.

2007-03-15  Ilkka Lehtoranta <ilkleht@isoveli.org>

  * mcc: ScrollGroup custom class was not created causing htmlview.mcc to crash.
    Also moved init functions after run_constructors() to make sure malloc() is
    available for new operator. The htmlview.mcc no longer crashes in MorphOS but
    does not function like original 68k version.

2007-03-14  Ilkka Lehtoranta <ilkleht@isoveli.org>

  * include/stubgen.pl: perl script (modified from cvinclude.pl from MorphOS SDK)
    to generate 68k vararg stubs for ppc. It is needed since gcc3/gcc4 compilers
    for MOS no longer support VARARGS68K.
  * mcc: demo app now works to some extent in MorphOS. Replaced VARARGS68K in
    TreeClass.cpp/BackUp() to standard version and reworked
    ImageManager.c/NewDecoderObject() to build with gcc4/mos.

2007-03-14  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/mcp: applied slightly modified patch kindly provided by Joerg
    Strohmayer. Now at least the HTMLview-Text app should run on AmigaOS4.

2007-03-13  Ilkka Lehtoranta <ilkleht@isoveli.org>

  * mcc: added constructors.c/.h and libnix.c to initialize constructors for
    libnix needed to build c++ classes. This required modification to mccheader.c
    because constructors/destructors should run only once in this kind of
    libraries.
  * mcc: now builds for MorphOS.
  * mcc/HTMLview-Test.c: now builds for MorphOS.
  * mcc: less warnings.

2007-03-13  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/#?: fixed a bunch of compiler warnings to get the MCC compiled more
    cleanly before we begin to hunt bugs.
  * mcc/mcp: replaced all GetAttrs()/get() uses with xget()

2007-03-12  Thore Böckelmann <tboeckel@gmx.de>

  * #?/Debug.c: disabling a debug flag was not possible due to a check for the
    '!' at a wrong index.

2007-03-12  Jens Langner <Jens.Langner@light-speed.de>

  * mcc/mcp: fixed the incorrect GETINTERFACE() usages for the OS4 target and
    got the OS4 target compiled again.

2007-03-11  Jens Langner <Jens.Langner@light-speed.de>

  * mcc: got rid of the single target makefiles and added a more generalized
    'Makefile' which should fit for all supported target platforms. In addition,
    the MCC souces should now at least compile for AmigaOS4 - however the
    HTMLview-Test application still crashes and as such also the htmlview.mcc
    class. More work is required to get the class going, especially on all
    supported target platforms.
  * mcp: fixed all compiler warnings and adapted sources to cleanly compile
    for OS3 and MOS target as well.

2007-03-08  Jens Langner <Jens.Langner@light-speed.de>

  * initial LGPL release published at sf.net. Please note that currently
    just the mcp compiles cleanly. The mcc sources still require a large
    amount of work to get compiled and running...
